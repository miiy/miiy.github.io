---
layout: post
title: "Docker"
date: 2016-06-12
tags: docker
---

## Install

https://docs.docker.com/engine/install/

### CentOS

SET UP THE REPOSITORY

```bash
sudo yum install -y yum-utils

sudo yum-config-manager \
    --add-repo \
    https://download.docker.com/linux/centos/docker-ce.repo

```

Install Docker Engine

```bash
sudo yum install docker-ce docker-ce-cli containerd.io
```

Start Docker.

```bash
sudo systemctl start docker
```

### Debian

```bash
sudo apt-get update
sudo apt-get install \
    apt-transport-https \
    ca-certificates \
    curl \
    gnupg-agent \
    software-properties-common

curl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add -
apt-key fingerprint 0EBFCD88
sudo add-apt-repository \
   "deb [arch=amd64] https://download.docker.com/linux/debian \
   $(lsb_release -cs) \
   stable"
sudo apt-get update
sudo apt-get install docker-ce docker-ce-cli containerd.io

cat <<EOF | sudo tee /etc/docker/daemon.json
{
    "registry-mirrors": ["http://hub-mirror.c.163.com"]
}
EOF
```

## Commands

```bash
docker images
docker images -a
docker ps
docker ps -a
# Remove build cache
docker builder prune
docker history harbor.k8s/library/php7-fpm
docker inspect 
# 保存镜像
docker save -o php7-fpm.tar harbor.k8s/library/php7-fpm
# 导入镜像
docker import php7-fpm.tar harbor.k8s/library/php7-fpm:latest
# 推送
docker push harbor.k8s/library/php7-fpm:latest
```
